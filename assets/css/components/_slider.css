/*
 * File: _slider.css   (v3 ‚Äì 2025-06-23)
 * ¬∑ 100 % pixel-perfect: la burbuja y la pista SIEMPRE coinciden con el thumb
 * ¬∑ Sin JS extra: basta con actualizar --val (0-100) desde tu script
 * ¬∑ Cross-browser: WebKit, Gecko y EdgeHTML
 * ¬∑ S√∫per comentado para que sepas qu√© hace cada l√≠nea üîç
 */

/* ========== 1. Variables globales (se pueden sobre-escribir por tema) ========== */
:root {
  /* Colores b√°sicos ----------------------------------------------------------- */
  --accent-color       : #03a9f4; /* color primario de la app  */
  --accent-color-light : color-mix(in srgb, var(--accent-color) 40%, #fff);
  --border-color       : #424242;
  --bg-header          : #263238;
  --bg-body            : #101418;
  --text-color-sec     : #9ea7b0;

  /* Tama√±os ------------------------------------------------------------------- */
  --slider-track-h     : 6px;      /* alto de la barra */
  --slider-thumb-size  : 16px;     /* √ò del thumb */
  --slider-bubble-padX : .45rem;
  --slider-bubble-padY : .2rem;

  /* Din√°micos (los actualiza tu JS) ------------------------------------------- */
  --val      : 0;   /* % (0-100) relleno del track + posici√≥n de burbuja      */
  --step-pct : 10;  /* % separaci√≥n entre marcas (pista punteada)             */
}

/* ========== 2. Contenedor del slider ========== */
.slider-wrap { position: relative; width: 100%; }

/* ========== 3. Input range base (sin estilos propios del navegador) ========== */
.slider-wrap input[type='range'].form-range {
  -webkit-appearance: none;
          appearance: none;
  cursor   : pointer;
  width    : 100%;
  height   : var(--slider-track-h);
  background: none;               /* dejamos la pista para pseudo-elementos   */
  outline  : none;                /* quitamos halo de enfoque predeterminado  */
}

/* ========== 4. Pista (track) ‚á¢ fondo + gradiente de progreso + marcas ========= */
.slider-wrap input[type='range'].form-range::-webkit-slider-runnable-track,
.slider-wrap input[type='range'].form-range::-moz-range-track,
.slider-wrap input[type='range'].form-range::-ms-track {
  height        : var(--slider-track-h);
  border-radius : calc(var(--slider-track-h) / 2);
  background    :
    /* 4-A. Relleno desde 0 % ‚Üí --val % */
    linear-gradient(
      90deg,
      var(--accent-color) 0%,
      var(--accent-color) calc(var(--val) * 1%),
      var(--border-color) calc(var(--val) * 1%),
      var(--border-color) 100%
    ) no-repeat,
    /* 4-B. Marcas de divisi√≥n cada --step-pct %  (1 px de alto) */
    repeating-linear-gradient(
      90deg,
      transparent                     0                                       calc(var(--step-pct) * 1% - 1px),
      var(--accent-color-light)       calc(var(--step-pct) * 1% - 1px)        calc(var(--step-pct) * 1%)
    ) no-repeat;
  background-size: 100% 100%, 100% 100%;
}

/* ========== 5. Thumb (WebKit) ========== */
.slider-wrap input[type='range'].form-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width            : var(--slider-thumb-size);
  height           : var(--slider-thumb-size);
  margin-top       : calc(-1 * (var(--slider-thumb-size) / 2 - var(--slider-track-h) / 2));
  border           : 2px solid var(--bg-header);
  border-radius    : 50%;
  background       : var(--accent-color);
  cursor           : pointer;
  transition       : box-shadow .15s;
}
/* foco ‚îÄ‚îÄ halo sutil */
.slider-wrap input[type='range'].form-range:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 50%, transparent);
}

/* ========== 6. Thumb (Firefox / EdgeHTML) ========== */
.slider-wrap input[type='range'].form-range::-moz-range-thumb,
.slider-wrap input[type='range'].form-range::-ms-thumb {
  width         : var(--slider-thumb-size);
  height        : var(--slider-thumb-size);
  border        : 2px solid var(--bg-header);
  border-radius : 50%;
  background    : var(--accent-color);
  cursor        : pointer;
  transition    : box-shadow .15s;
}
.slider-wrap input[type='range'].form-range:focus::-moz-range-thumb,
.slider-wrap input[type='range'].form-range:focus::-ms-thumb {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 50%, transparent);
}

/* ========== 7. Burbuja flotante (se centra con translateX(-50 %)) ========== */
.slider-bubble {
  position : absolute;
  top      : calc(-1 * var(--slider-thumb-size) - 1.2rem);
  left     : calc(var(--val) * 1%);
  transform: translateX(-50%);
  padding  : var(--slider-bubble-padY) var(--slider-bubble-padX);
  border-radius : .3rem;
  font-size     : .75rem;
  font-weight   : 600;
  white-space   : nowrap;
  color         : var(--bg-body);
  background    : var(--accent-color);
  pointer-events: none;
  transition    : opacity .15s;
}

/* Animaci√≥n ‚Äúshake‚Äù cuando el usuario arrastra ‚îÄ diversi√≥n pura üòé */
@keyframes shake-bubble {
  0%,100% { transform: translateX(-50%) translateY(0); }
  50%     { transform: translateX(-50%) translateY(-3px); }
}
.slider-wrap input[type='range']:active + .slider-bubble {
  animation: shake-bubble .35s ease-in-out;
}

/* ========== 8. Etiquetas y textos secundarios ========== */
#valFz, #valVc, #valAe,
.slider-wrap .highlight {
  font-weight: 600; color: var(--accent-color);
}
.text-end.small.text-secondary,
#textPasadasInfo { color: var(--text-color-sec); }

#errorMsg {
  display: none;
  color  : #f44336;
  font-size: .85rem;
}
