/* =======================================================================
   STEPPER CNC 2025  ⟶  Versión centrada
   ───────────────────────────────────────────────────────────────────────
   • Fondo dark (#0f172a), tipografía Rajdhani.
   • PNG transparente en .logo-stepper se integra sin halos.
   • Dos barras celestes (superior + inferior) animadas por paso activo.
   • Código hiper-comentado, sección por sección.
   ======================================================================= */

/* 1) FUENTE ------------------------------------------------------------ */
@import url("https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap");

/* 2) RESET BÁSICO ------------------------------------------------------ */
html,
body{
  margin: 0;                           /* Elimina márgenes default        */
  overflow-x: hidden !important;       /* Sin scroll horizontal global    */
  font-family: "Rajdhani", sans-serif; /* Letra técnica                   */
  background: #0f172a;                 /* Azul oscuro de la aplicación    */
  color: #dceefb;                      /* Texto base azul claro           */
}

/* 3) CONTENEDOR FIJO DEL STEPPER -------------------------------------- */
.stepper-container{
  position: sticky;  top: 0;  z-index: 1000;  /* Siempre visible arriba  */
  width: 100%;                                 /* Abarca ancho completo   */
  background: transparent;                     /* Deja ver fondo global   */

  /* Scroll horizontal (solo PC, si sobran pasos) */
  overflow-x: auto;
  scrollbar-width: none;                       /* Oculta barra en Firefox */
  /* Sombra y línea inferior oscura */
  box-shadow:
    0 8px 16px rgba(0, 0, 0, .55),
    inset 0 -1px 0 #1b2537;
}
.stepper-container::-webkit-scrollbar{ display: none; } /* Oculta en WebKit */

/* 3a) Tapas triangulares para cerrar el clip-path falso ---------------- */
.stepper-container::before,
.stepper-container::after{
  content: "";
  position: absolute;  top: 0;  bottom: 0;
  width: 14px;                         /* Igual al “diente” */
  background: #162235;                 /* Mismo azul de cada paso */
  pointer-events: none;                /* No atrapa clics */
  z-index: 5;
}
.stepper-container::before{ left: 0;  clip-path: polygon(0 0,100% 0,100% 100%); }
.stepper-container::after { right: 0; clip-path: polygon(0 0,100% 0,0 100%); }

/* 4) LISTA DE PASOS ---------------------------------------------------- */
.stepper{
  display: flex;                       /* Pasos en fila                    */
  width: max-content;                  /* Se adapta al ancho real          */
  margin: 0 auto;                      /* …y se centra                     */
  padding: 0;
  list-style: none;                    /* Quita bullets                    */
  background: transparent;
  overflow-x: auto;                    /* Scroll horizontal (si muchos)    */
  scroll-behavior: smooth;             /* Desplazamiento suave             */
}
/* Scrollbar fina (se muestra sólo si hay overflow) */
.stepper::-webkit-scrollbar{ height: 6px; }
.stepper::-webkit-scrollbar-thumb{ background: #1b2537; border-radius: 3px; }

/* 5) LOGO DE MARCA / PNG TRANSPARENTE --------------------------------- */
.logo-stepper{
  display: flex; align-items: center;
  padding: 0 1.25rem;
  background: transparent;             /* ==> hereda #0f172a               */
  clip-path: polygon(0 0,100% 0,calc(100% - 12px) 100%,12px 100%);
  font-weight: 500;
}
.logo-stepper img{
  height: 42px; max-height: 48px;      /* Tamaño consistente               */
  object-fit: contain;                 /* Mantiene proporciones            */
  filter: drop-shadow(0 0 2px rgba(0,0,0,.4)); /* Sutil realce            */
}

/* 6) CADA PASO (li) --------------------------------------------------- */
.stepper li{
  flex: 0 0 auto;                      /* No se agranda más de su ancho    */
  position: relative;

  /* Forma romboide con “diente” de 12 px */
  padding: .75rem 1.25rem;
  margin-left: -12px;                  /* Superpone sobre el diente prev.  */
  background: #162235;                 /* Azul base de paso                */
  color: #d2d2d2;                      /* Texto gris claro                 */
  font: 500 1rem/1 "Rajdhani", sans-serif;
  text-transform: uppercase;

  clip-path: polygon(12px 0,100% 0,calc(100% - 12px) 100%,0 100%);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;

  /* Ya NO usamos border-bottom celeste (evita tercera línea) */
  border-bottom: 2px solid transparent;

  transition: background .3s, color .3s;
}
/* Primer paso: sin “sierra” izquierda */
.stepper li:first-child{
  margin-left: 0;
  clip-path: polygon(0 0,100% 0,calc(100% - 12px) 100%,12px 100%);
}
/* Línea divisoria vertical entre pasos */
.stepper li:not(:last-child)::after{
  content: "";
  position: absolute;  right: 0;  top: 12%;  bottom: 12%;
  width: 1px;          background: rgba(255,255,255,.15);
}

/* 6a) Estados activo / completado ------------------------------------ */
.stepper li.active,
.stepper li.done{
  background: #1d3557;                 /* Azul algo más brillante          */
  color: #fff;
}
.stepper li.active{ text-shadow: 0 0 6px rgba(0,191,255,.45); }

/* ── Barras celestes (animadas) ── */
.stepper li.active::before,
.stepper li.done::before,
.stepper li.active::after,
.stepper li.done::after{
  content: "";
  position: absolute;   left: 0;
  height: 4px;          width: 0;           /* Se rellena con keyframe    */
  background: #00bfff;                      /* Celeste radiante           */
  animation: fill-bar .45s forwards;        /* Animación común            */
}
/* Superior */
.stepper li.active::before,
.stepper li.done::before{ top: 0; }
/* Inferior */
.stepper li.active::after,
.stepper li.done::after { bottom: 0; }

/* Barre de 0% a 100% de izquierda a derecha */
@keyframes fill-bar{
  from{ width: 0; }
  to  { width: 100%; }
}

/* 7) ÍCONO FEATHER / LUCIDE ----------------------------------------- */
.stepper li .icon{
  margin-left: .35rem;                 /* Espacio antes del ícono          */
  width: 1em; height: 1em;
  stroke-width: 2;
  vertical-align: middle;
}

/* 8) RESPONSIVE ≤ 1 200 px  ----------------------------------------- */
@media(max-width:1200px){
  /* La lista deja de ser flex y se muestra sólo paso activo */
  .stepper{
    display: block;      width: 100%;  margin: 0 auto;
    overflow-x: hidden;  scrollbar-width: none;
  }
  .stepper::-webkit-scrollbar{ display: none; }

  /* Ocultamos logo y pasos que no están activos */
  .logo-stepper, .stepper li{ display: none; }

  .stepper li.active{
    display: block !important;
    width: 100%; margin: 0; padding: 1rem;
    box-sizing: border-box;
    clip-path: none; text-align: center;
    font-size: 1.15rem; font-weight: 500;
  }
  .stepper li.done{ display: none !important; }

  .stepper-container{ overflow-x: hidden; }  /* Sin scroll horizontal     */
}

/* 9) EFECTOS (slide + glow, 1 sola vez) ----------------------------- */
/* Entrada horizontal (desktop) y vertical (compacto) */
@keyframes slideInX{ 0%{ transform: translateX(-14px); opacity:0; }
                      100%{ transform: translateX(0);   opacity:1; } }
@keyframes slideInY{ 0%{ transform: translateY(-10px); opacity:0; }
                      100%{ transform: translateY(0);   opacity:1; } }
/* Resplandor azul momentáneo */
@keyframes glowBar{
  0%{   box-shadow:0 0 0 0 rgba(0,191,255,0); }
  60%{  box-shadow:0 0 8px 2px rgba(0,191,255,.55); }
  100%{ box-shadow:0 0 0 0 rgba(0,191,255,0); }
}

/* Aplica sólo si el paso NO tiene .anim-done (ejecución única) */
.stepper li.active:not(.anim-done){
  animation: slideInX .35s ease-out both,
             glowBar 1s .35s ease-out 1;
  animation-composition: add;          /* No pisa fill-bar               */
}
@media(max-width:1200px){
  .stepper li.active:not(.anim-done){
    animation: slideInY .35s ease-out both,
               glowBar 1s .35s ease-out 1;
  }
}

/* 10) HOVER SUTIL EN ESCRITORIOS ------------------------------------ */
@media(min-width:1201px){
  .stepper li:hover{
    transform: translateY(-2px);
    filter: brightness(1.1);
    transition: transform .2s ease, filter .2s ease;
  }
}
